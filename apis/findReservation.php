<?php
session_start();
require_once "../db/connection.php";
// $valid = array();
header('Content-Type: application/json; charset=utf-8');
$responseData = array(); 
$_SESSION["msg"] = array();
// Date time for Manila
$dt = new DateTime("now", new DateTimeZone("Asia/Manila"));

// If date is given, then use it. Otherwise, use the date today and add a day.
$date = isset($_POST["date"]) ? $_POST["date"] : $dt->modify('+1 day')->format("Y-m-d");
// If the time is given, then use it. Otherwise, use the 9am time.
$time = isset($_POST["time"]) ? date("H:i:s", strtotime($_POST["time"])) : date("H:i:s", strtotime('today 9am'));
$queryTime = date("{$date} {$time}");

$sql = "SELECT * FROM reservations WHERE date = '{$date}' 
    AND '{$queryTime}' < endTime;";
// echo $sql;
$result = mysqli_query($db, $sql);
$json = mysqli_fetch_all($result, MYSQLI_ASSOC);

$map = new Map();
$newTime = date("H:i A", strtotime($time));
$headerDate = date("F d (l) Y", strtotime($date));
$map->set_header(<<<HEADER
    <h2 style="text-align: center; padding: 3rem">
        Table Mapping for <br> {$headerDate} <br> {$newTime}
    </h2>
HEADER);
$map->set_smTbl(<<<TBL
    <svg version="1.1" class="sm-tbl" id="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 300 300" enable-background="new 0 0 300 300" xml:space="preserve">
        <path stroke="#000000" stroke-width="3" stroke-miterlimit="10" d="M200.434,214.413h-98.735
    c-7.404,0-13.406-6.002-13.406-13.406V93.477c0-7.404,6.002-13.406,13.406-13.406h98.735c7.404,0,13.406,6.002,13.406,13.406v107.53
    C213.84,208.411,207.838,214.413,200.434,214.413z" />
        <g>
            <path fill="#808285" d="M30.169,170.172H16.84c-1.292,0-2.34-1.048-2.34-2.34v-41.18c0-1.292,1.048-2.34,2.34-2.34h13.329
        c1.292,0,2.34,1.048,2.34,2.34v41.18C32.509,169.124,31.461,170.172,30.169,170.172z" />
            <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M34.639,124.312h49.174v45.859H34.639
        c-1.292,0-2.34-1.048-2.34-2.34v-41.18C32.299,125.36,33.347,124.312,34.639,124.312z" />
            <path stroke="#000000" stroke-width="2" stroke-miterlimit="10" d="M29.998,118.508h49.834
        c0.464,0,0.84,0.376,0.84,0.84v4.125c0,0.464-0.376,0.84-0.84,0.84H29.998c-0.464,0-0.84-0.376-0.84-0.84v-4.125
        C29.158,118.884,29.534,118.508,29.998,118.508z" />
            <path stroke="#000000" stroke-width="2" stroke-miterlimit="10" d="M29.998,170.172h49.834
        c0.464,0,0.84,0.376,0.84,0.84v4.125c0,0.464-0.376,0.84-0.84,0.84H29.998c-0.464,0-0.84-0.376-0.84-0.84v-4.125
        C29.158,170.548,29.534,170.172,29.998,170.172z" />
        </g>
        <g>
            <path fill="#808285" d="M173.996,273.595v13.329c0,1.292-1.048,2.34-2.34,2.34h-41.18c-1.292,0-2.34-1.048-2.34-2.34v-13.329
        c0-1.292,1.048-2.34,2.34-2.34h41.18C172.949,271.255,173.996,272.303,173.996,273.595z" />
            <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M128.137,269.125v-49.174h45.859v49.174
        c0,1.292-1.048,2.34-2.34,2.34h-41.18C129.184,271.465,128.137,270.417,128.137,269.125z" />
            <path stroke="#000000" stroke-width="2" stroke-miterlimit="10" d="M122.332,273.766v-49.834
        c0-0.464,0.376-0.84,0.84-0.84h4.125c0.464,0,0.84,0.376,0.84,0.84v49.834c0,0.464-0.376,0.84-0.84,0.84h-4.125
        C122.708,274.606,122.332,274.23,122.332,273.766z" />
            <path stroke="#000000" stroke-width="2" stroke-miterlimit="10" d="M173.996,273.766v-49.834
        c0-0.464,0.376-0.84,0.84-0.84h4.125c0.464,0,0.84,0.376,0.84,0.84v49.834c0,0.464-0.376,0.84-0.84,0.84h-4.125
        C174.372,274.606,173.996,274.23,173.996,273.766z" />
        </g>
        <g>
            <path fill="#808285" d="M128.137,20.889V7.56c0-1.292,1.048-2.34,2.34-2.34h41.18c1.292,0,2.34,1.048,2.34,2.34v13.329
        c0,1.292-1.048,2.34-2.34,2.34h-41.18C129.184,23.229,128.137,22.181,128.137,20.889z" />
            <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M173.996,25.359v49.174h-45.859V25.359
        c0-1.292,1.048-2.34,2.34-2.34h41.18C172.949,23.019,173.996,24.067,173.996,25.359z" />
            <path stroke="#000000" stroke-width="2" stroke-miterlimit="10" d="M179.8,20.718v49.834c0,0.464-0.376,0.84-0.84,0.84
        h-4.125c-0.464,0-0.84-0.376-0.84-0.84V20.718c0-0.464,0.376-0.84,0.84-0.84h4.125C179.424,19.878,179.8,20.254,179.8,20.718z" />
            <path stroke="#000000" stroke-width="2" stroke-miterlimit="10" d="M128.137,20.718v49.834
        c0,0.464-0.376,0.84-0.84,0.84h-4.125c-0.464,0-0.84-0.376-0.84-0.84V20.718c0-0.464,0.376-0.84,0.84-0.84h4.125
        C127.761,19.878,128.137,20.254,128.137,20.718z" />
        </g>
        <g>
            <path fill="#808285" d="M272.054,124.312h13.329c1.292,0,2.34,1.048,2.34,2.34v41.18c0,1.292-1.048,2.34-2.34,2.34h-13.329
        c-1.292,0-2.34-1.048-2.34-2.34v-41.18C269.714,125.36,270.762,124.312,272.054,124.312z" />
            <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M267.584,170.172H218.41v-45.859h49.174
        c1.292,0,2.34,1.048,2.34,2.34v41.18C269.923,169.124,268.876,170.172,267.584,170.172z" />
            <path stroke="#000000" stroke-width="2" stroke-miterlimit="10" d="M272.225,175.976h-49.834
        c-0.464,0-0.84-0.376-0.84-0.84v-4.125c0-0.464,0.376-0.84,0.84-0.84h49.834c0.464,0,0.84,0.376,0.84,0.84v4.125
        C273.064,175.6,272.688,175.976,272.225,175.976z" />
            <path stroke="#000000" stroke-width="2" stroke-miterlimit="10" d="M272.225,124.312h-49.834
        c-0.464,0-0.84-0.376-0.84-0.84v-4.125c0-0.464,0.376-0.84,0.84-0.84h49.834c0.464,0,0.84,0.376,0.84,0.84v4.125
        C273.064,123.936,272.688,124.312,272.225,124.312z" />
    </svg>
    <span>
        4 Seater
    </span>
TBL);
$map->set_lgTbl(<<<TBL
    <svg version="1.1" id="tbl-for-28" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 174.5 300" enable-background="new 0 0 174.5 300" xml:space="preserve">
        <path stroke="#000000" stroke-miterlimit="10" d="M127.473,248.592H47.527c-5.538,0-10.027-4.489-10.027-10.027
            V55.098c0-5.538,4.489-10.027,10.027-10.027h79.945c5.538,0,10.027,4.489,10.027,10.027v183.467
            C137.5,244.102,133.011,248.592,127.473,248.592z" />
        <path fill="#808285" d="M166.088,55.787h4.243c1.292,0,2.34,1.048,2.34,2.34v18.041c0,1.292-1.048,2.34-2.34,2.34h-4.243
            c-1.292,0-2.34-1.048-2.34-2.34V58.127C163.748,56.835,164.795,55.787,166.088,55.787z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M161.512,78.508H138.33v-22.72h23.182
            c1.292,0,2.34,1.048,2.34,2.34v18.041C163.852,77.46,162.804,78.508,161.512,78.508z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,81.383h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,81.007,165.032,81.383,164.568,81.383z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,55.787h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,55.411,165.032,55.787,164.568,55.787z" />
        <path fill="#808285" d="M166.088,87.245h4.243c1.292,0,2.34,1.048,2.34,2.34v18.041c0,1.292-1.048,2.34-2.34,2.34h-4.243
            c-1.292,0-2.34-1.048-2.34-2.34V89.585C163.748,88.293,164.795,87.245,166.088,87.245z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M161.512,109.965H138.33v-22.72h23.182
            c1.292,0,2.34,1.048,2.34,2.34v18.041C163.852,108.918,162.804,109.965,161.512,109.965z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,112.841h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,112.465,165.032,112.841,164.568,112.841z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,87.245h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,86.869,165.032,87.245,164.568,87.245z" />
        <path fill="#808285" d="M59.664,16.687v-4.243c0-1.292,1.048-2.34,2.34-2.34h18.041c1.292,0,2.34,1.048,2.34,2.34v4.243
            c0,1.292-1.048,2.34-2.34,2.34H62.004C60.712,19.027,59.664,17.979,59.664,16.687z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M82.385,21.263v23.182h-22.72V21.263
            c0-1.292,1.048-2.34,2.34-2.34h18.041C81.337,18.923,82.385,19.971,82.385,21.263z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M85.261,18.207v23.842c0,0.464-0.376,0.84-0.84,0.84h-1.196
            c-0.464,0-0.84-0.376-0.84-0.84V18.207c0-0.464,0.376-0.84,0.84-0.84h1.196C84.885,17.367,85.261,17.743,85.261,18.207z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M59.664,18.207v23.842c0,0.464-0.376,0.84-0.84,0.84h-1.196
            c-0.464,0-0.84-0.376-0.84-0.84V18.207c0-0.464,0.376-0.84,0.84-0.84h1.196C59.288,17.367,59.664,17.743,59.664,18.207z" />
        <path fill="#808285" d="M91.122,16.687v-4.243c0-1.292,1.048-2.34,2.34-2.34h18.041c1.292,0,2.34,1.048,2.34,2.34v4.243
            c0,1.292-1.048,2.34-2.34,2.34H93.462C92.17,19.027,91.122,17.979,91.122,16.687z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M113.843,21.263v23.182h-22.72V21.263
            c0-1.292,1.048-2.34,2.34-2.34h18.041C112.795,18.923,113.843,19.971,113.843,21.263z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M116.718,18.207v23.842c0,0.464-0.376,0.84-0.84,0.84h-1.196
            c-0.464,0-0.84-0.376-0.84-0.84V18.207c0-0.464,0.376-0.84,0.84-0.84h1.196C116.342,17.367,116.718,17.743,116.718,18.207z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M91.122,18.207v23.842c0,0.464-0.376,0.84-0.84,0.84h-1.196
            c-0.464,0-0.84-0.376-0.84-0.84V18.207c0-0.464,0.376-0.84,0.84-0.84h1.196C90.746,17.367,91.122,17.743,91.122,18.207z" />
        <path fill="#808285" d="M113.843,276.975v4.243c0,1.292-1.048,2.34-2.34,2.34H93.462c-1.292,0-2.34-1.048-2.34-2.34v-4.243
            c0-1.292,1.048-2.34,2.34-2.34h18.041C112.795,274.635,113.843,275.683,113.843,276.975z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M91.122,272.399v-23.182h22.72v23.182
            c0,1.292-1.048,2.34-2.34,2.34H93.462C92.17,274.739,91.122,273.691,91.122,272.399z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M88.246,275.455v-23.842c0-0.464,0.376-0.84,0.84-0.84h1.196
            c0.464,0,0.84,0.376,0.84,0.84v23.842c0,0.464-0.376,0.84-0.84,0.84h-1.196C88.622,276.295,88.246,275.919,88.246,275.455z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M113.843,275.455v-23.842c0-0.464,0.376-0.84,0.84-0.84h1.196
            c0.464,0,0.84,0.376,0.84,0.84v23.842c0,0.464-0.376,0.84-0.84,0.84h-1.196C114.219,276.295,113.843,275.919,113.843,275.455z" />
        <path fill="#808285" d="M82.385,276.975v4.243c0,1.292-1.048,2.34-2.34,2.34H62.004c-1.292,0-2.34-1.048-2.34-2.34v-4.243
            c0-1.292,1.048-2.34,2.34-2.34h18.041C81.337,274.635,82.385,275.683,82.385,276.975z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M59.664,272.399v-23.182h22.72v23.182
            c0,1.292-1.048,2.34-2.34,2.34H62.004C60.712,274.739,59.664,273.691,59.664,272.399z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M56.789,275.455v-23.842c0-0.464,0.376-0.84,0.84-0.84h1.196
            c0.464,0,0.84,0.376,0.84,0.84v23.842c0,0.464-0.376,0.84-0.84,0.84h-1.196C57.165,276.295,56.789,275.919,56.789,275.455z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M82.385,275.455v-23.842c0-0.464,0.376-0.84,0.84-0.84h1.196
            c0.464,0,0.84,0.376,0.84,0.84v23.842c0,0.464-0.376,0.84-0.84,0.84h-1.196C82.761,276.295,82.385,275.919,82.385,275.455z" />
        <path fill="#808285" d="M166.088,118.703h4.243c1.292,0,2.34,1.048,2.34,2.34v18.041c0,1.292-1.048,2.34-2.34,2.34h-4.243
            c-1.292,0-2.34-1.048-2.34-2.34v-18.041C163.748,119.75,164.795,118.703,166.088,118.703z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M161.512,141.423H138.33v-22.72h23.182
            c1.292,0,2.34,1.048,2.34,2.34v18.041C163.852,140.376,162.804,141.423,161.512,141.423z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,144.299h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,143.923,165.032,144.299,164.568,144.299z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,118.703h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,118.327,165.032,118.703,164.568,118.703z" />
        <path fill="#808285" d="M166.088,150.161h4.243c1.292,0,2.34,1.048,2.34,2.34v18.041c0,1.292-1.048,2.34-2.34,2.34h-4.243
            c-1.292,0-2.34-1.048-2.34-2.34V152.5C163.748,151.208,164.795,150.161,166.088,150.161z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M161.512,172.881H138.33v-22.72h23.182
            c1.292,0,2.34,1.048,2.34,2.34v18.041C163.852,171.833,162.804,172.881,161.512,172.881z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,175.757h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,175.381,165.032,175.757,164.568,175.757z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,150.161h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,149.785,165.032,150.161,164.568,150.161z" />
        <path fill="#808285" d="M166.088,181.618h4.243c1.292,0,2.34,1.048,2.34,2.34v18.041c0,1.292-1.048,2.34-2.34,2.34h-4.243
            c-1.292,0-2.34-1.048-2.34-2.34v-18.041C163.748,182.666,164.795,181.618,166.088,181.618z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M161.512,204.339H138.33v-22.72h23.182
            c1.292,0,2.34,1.048,2.34,2.34v18.041C163.852,203.291,162.804,204.339,161.512,204.339z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,207.215h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,206.839,165.032,207.215,164.568,207.215z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,181.618h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,181.242,165.032,181.618,164.568,181.618z" />
        <path fill="#808285" d="M166.088,213.076h4.243c1.292,0,2.34,1.048,2.34,2.34v18.041c0,1.292-1.048,2.34-2.34,2.34h-4.243
            c-1.292,0-2.34-1.048-2.34-2.34v-18.041C163.748,214.124,164.795,213.076,166.088,213.076z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M161.512,235.797H138.33v-22.72h23.182
            c1.292,0,2.34,1.048,2.34,2.34v18.041C163.852,234.749,162.804,235.797,161.512,235.797z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,238.672h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,238.296,165.032,238.672,164.568,238.672z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M164.568,213.076h-23.842c-0.464,0-0.84-0.376-0.84-0.84v-1.196
            c0-0.464,0.376-0.84,0.84-0.84h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196C165.408,212.7,165.032,213.076,164.568,213.076z" />
        <path fill="#808285" d="M8.665,232.866H4.422c-1.292,0-2.34-1.048-2.34-2.34v-18.041c0-1.292,1.048-2.34,2.34-2.34h4.243
            c1.292,0,2.34,1.048,2.34,2.34v18.041C11.004,231.818,9.957,232.866,8.665,232.866z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M13.24,210.145h23.182v22.72H13.24
            c-1.292,0-2.34-1.048-2.34-2.34v-18.041C10.901,211.193,11.948,210.145,13.24,210.145z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,207.27h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84v-1.196C9.344,207.646,9.72,207.27,10.184,207.27z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,232.866h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84v-1.196C9.344,233.242,9.72,232.866,10.184,232.866z" />
        <path fill="#808285" d="M8.665,201.408H4.422c-1.292,0-2.34-1.048-2.34-2.34v-18.041c0-1.292,1.048-2.34,2.34-2.34h4.243
            c1.292,0,2.34,1.048,2.34,2.34v18.041C11.004,200.36,9.957,201.408,8.665,201.408z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M13.24,178.688h23.182v22.72H13.24
            c-1.292,0-2.34-1.048-2.34-2.34v-18.041C10.901,179.735,11.948,178.688,13.24,178.688z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,175.812h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84v-1.196C9.344,176.188,9.72,175.812,10.184,175.812z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,201.408h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84v-1.196C9.344,201.784,9.72,201.408,10.184,201.408z" />
        <path fill="#808285" d="M8.665,169.95H4.422c-1.292,0-2.34-1.048-2.34-2.34V149.57c0-1.292,1.048-2.34,2.34-2.34h4.243
            c1.292,0,2.34,1.048,2.34,2.34v18.041C11.004,168.903,9.957,169.95,8.665,169.95z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M13.24,147.23h23.182v22.72H13.24
            c-1.292,0-2.34-1.048-2.34-2.34V149.57C10.901,148.277,11.948,147.23,13.24,147.23z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,144.354h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84v-1.196C9.344,144.73,9.72,144.354,10.184,144.354z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,169.95h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84v-1.196C9.344,170.326,9.72,169.95,10.184,169.95z" />
        <path fill="#808285" d="M8.665,138.492H4.422c-1.292,0-2.34-1.048-2.34-2.34v-18.041c0-1.292,1.048-2.34,2.34-2.34h4.243
            c1.292,0,2.34,1.048,2.34,2.34v18.041C11.004,137.445,9.957,138.492,8.665,138.492z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M13.24,115.772h23.182v22.72H13.24
            c-1.292,0-2.34-1.048-2.34-2.34v-18.041C10.901,116.819,11.948,115.772,13.24,115.772z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,112.896h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84v-1.196C9.344,113.272,9.72,112.896,10.184,112.896z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,138.492h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84v-1.196C9.344,138.868,9.72,138.492,10.184,138.492z" />
        <path fill="#808285" d="M8.665,107.035H4.422c-1.292,0-2.34-1.048-2.34-2.34V86.654c0-1.292,1.048-2.34,2.34-2.34h4.243
            c1.292,0,2.34,1.048,2.34,2.34v18.041C11.004,105.987,9.957,107.035,8.665,107.035z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M13.24,84.314h23.182v22.72H13.24
            c-1.292,0-2.34-1.048-2.34-2.34V86.654C10.901,85.362,11.948,84.314,13.24,84.314z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,81.438h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84v-1.196C9.344,81.814,9.72,81.438,10.184,81.438z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,107.035h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84v-1.196C9.344,107.411,9.72,107.035,10.184,107.035z" />
        <path fill="#808285" d="M8.665,75.577H4.422c-1.292,0-2.34-1.048-2.34-2.34V55.196c0-1.292,1.048-2.34,2.34-2.34h4.243
            c1.292,0,2.34,1.048,2.34,2.34v18.041C11.004,74.529,9.957,75.577,8.665,75.577z" />
        <path fill="#808285" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" d="M13.24,52.856h23.182v22.72H13.24
            c-1.292,0-2.34-1.048-2.34-2.34V55.196C10.901,53.904,11.948,52.856,13.24,52.856z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,49.981h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84V50.82C9.344,50.357,9.72,49.981,10.184,49.981z" />
        <path stroke="#000000" stroke-miterlimit="10" d="M10.184,75.577h23.842c0.464,0,0.84,0.376,0.84,0.84v1.196
            c0,0.464-0.376,0.84-0.84,0.84H10.184c-0.464,0-0.84-0.376-0.84-0.84v-1.196C9.344,75.953,9.72,75.577,10.184,75.577z" />
    </svg>
    <span>
        28 Seater
    </span>
TBL);
$map->set_data(json_encode($json));
// RETURNS THE MAIN GENERATED TABLE MAPPING
$responseData["map"] = $map->content();
$responseData["date"] = $date;
$responseData["time"] = $newTime;

echo json_encode($responseData);

class Map
{
    function content()
    {
        return <<<CONTENT
            {$this->get_header()}
            <div id="main-grid">
                <div style="display:flex; width:100%!important; align-items:center; position:relative">
                    <svg version="1.1" id="wall" xmlns="http://www.w3.org/2000/svg" width="2rem" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 13.028 300" enable-background="new 0 0 13.028 300" xml:space="preserve">
                        <g>
                            <path d="M9.027,208.979c0.159-0.25,0.409-0.83,0.409-1.439c0-1.129-0.72-1.479-1.259-1.469c-0.91,0.01-1.299,0.83-1.299,1.679
                            v0.489h-0.66v-0.489c0-0.64-0.33-1.449-1.1-1.449c-0.52,0-0.979,0.33-0.979,1.14c0,0.52,0.23,1.02,0.43,1.299l-0.64,0.23
                            c-0.25-0.34-0.5-1-0.5-1.699c0-1.279,0.76-1.859,1.549-1.859c0.669,0,1.239,0.4,1.529,1.199h0.02
                            c0.16-0.799,0.76-1.449,1.669-1.449c1.04,0,1.949,0.811,1.949,2.369c0,0.729-0.23,1.369-0.439,1.689L9.027,208.979z" />
                            <path d="M3.39,203.748c-0.08-0.529-0.14-1.158-0.14-1.848c0-1.25,0.29-2.14,0.839-2.729c0.55-0.6,1.329-0.95,2.419-0.95
                            c1.099,0,1.998,0.34,2.618,0.97c0.63,0.629,0.97,1.669,0.97,2.979c0,0.619-0.03,1.139-0.08,1.578H3.39z M9.346,202.879
                            c0.04-0.22,0.05-0.539,0.05-0.879c0-1.859-1.039-2.869-2.858-2.869c-1.589-0.01-2.599,0.891-2.599,2.729
                            c0,0.45,0.04,0.79,0.09,1.02H9.346z" />
                            <path d="M10.036,194.969H3.3v-0.949l3.408-2.158c0.79-0.5,1.499-0.891,2.189-1.21l-0.011-0.021
                            c-0.899,0.08-1.719,0.101-2.768,0.101H3.3v-0.819h6.736v0.879l-3.417,2.139c-0.75,0.471-1.52,0.92-2.249,1.26l0.01,0.029
                            c0.85-0.049,1.659-0.069,2.778-0.069h2.878V194.969z" />
                            <path d="M6.878,184.9v2.619h2.428v-2.918h0.729v3.787H3.3v-3.638h0.729v2.769h2.129V184.9H6.878z" />
                            <path d="M10.036,182.279L3.3,183.988v-0.919l3.408-0.8c0.839-0.199,1.679-0.379,2.329-0.5v-0.02c-0.67-0.109-1.47-0.32-2.339-0.55
                            L3.3,180.301v-0.91l3.418-0.818c0.799-0.19,1.599-0.37,2.309-0.471v-0.02c-0.74-0.141-1.489-0.33-2.329-0.539L3.3,176.652v-0.889
                            l6.736,1.908v0.91l-3.508,0.85c-0.859,0.209-1.519,0.35-2.199,0.439v0.02c0.67,0.12,1.33,0.27,2.199,0.52l3.508,0.96V182.279z" />
                            <path d="M10.036,171.76H7.178L3.3,173.889v-0.989l1.859-0.949c0.51-0.26,0.919-0.46,1.389-0.669v-0.021
                            c-0.439-0.19-0.879-0.42-1.389-0.68l-1.859-0.97v-0.989l3.868,2.259h2.868V171.76z" />
                            <path d="M6.598,162.453c2.318,0,3.548,1.408,3.548,3.128c0,1.779-1.38,3.028-3.418,3.028c-2.139,0-3.538-1.329-3.538-3.129
                            C3.19,163.643,4.599,162.453,6.598,162.453z M6.708,167.68c1.439,0,2.728-0.779,2.728-2.148c0-1.379-1.27-2.159-2.798-2.159
                            c-1.339,0-2.739,0.7-2.739,2.149C3.899,166.961,5.229,167.68,6.708,167.68z" />
                            <path d="M3.39,161.319c-0.09-0.439-0.14-1.069-0.14-1.669c0-0.93,0.17-1.529,0.549-1.949c0.3-0.34,0.76-0.529,1.279-0.529
                            c0.89,0,1.479,0.56,1.719,1.27h0.03c0.18-0.52,0.659-0.83,1.359-0.99c0.939-0.219,1.589-0.379,1.849-0.52v0.9
                            c-0.189,0.109-0.77,0.26-1.608,0.449c-0.93,0.199-1.279,0.56-1.31,1.35v0.819h2.918v0.869H3.39z M6.458,160.45v-0.89
                            c0-0.93-0.51-1.52-1.279-1.52c-0.87,0-1.249,0.63-1.259,1.549c0,0.42,0.04,0.721,0.08,0.86H6.458z" />
                            <path d="M3.3,155.939v-0.869h3.248v-0.03c-0.26-0.18-0.5-0.36-0.719-0.53L3.3,152.451v-1.079l2.858,2.438l3.877-2.629v1.03
                            l-3.308,2.219l0.74,0.64h2.568v0.869H3.3z" />
                            <path d="M9.816,143.692c0.16,0.319,0.32,0.959,0.32,1.779c0,1.899-1.2,3.328-3.408,3.328c-2.109,0-3.538-1.429-3.538-3.518
                            c0-0.84,0.18-1.369,0.3-1.599l0.709,0.209c-0.16,0.33-0.28,0.8-0.28,1.36c0,1.579,1.009,2.628,2.778,2.628
                            c1.649,0,2.708-0.95,2.708-2.588c0-0.53-0.109-1.07-0.279-1.419L9.816,143.692z" />
                            <path d="M3.3,141.73h6.736v0.869H3.3V141.73z" />
                            <path d="M4.039,138.931v2.049H3.3v-4.987h0.74v2.06h5.996v0.879H4.039z" />
                            <path d="M10.036,133.461H7.178L3.3,135.59v-0.989l1.859-0.95c0.51-0.26,0.919-0.459,1.389-0.669v-0.021
                            c-0.439-0.189-0.879-0.42-1.389-0.68L3.3,131.313v-0.99l3.868,2.259h2.868V133.461z" />
                            <path d="M8.976,127.55c0.24-0.39,0.44-0.959,0.44-1.56c0-0.889-0.47-1.409-1.149-1.409c-0.63,0-0.989,0.36-1.339,1.27
                            c-0.39,1.1-0.959,1.779-1.909,1.779c-1.05,0-1.829-0.87-1.829-2.179c0-0.689,0.16-1.189,0.33-1.489l0.71,0.239
                            c-0.12,0.221-0.32,0.67-0.32,1.279c0,0.92,0.549,1.27,1.009,1.27c0.63,0,0.939-0.409,1.299-1.339
                            c0.44-1.14,0.989-1.719,1.979-1.719c1.04,0,1.939,0.77,1.939,2.358c0,0.649-0.19,1.359-0.43,1.719L8.976,127.55z" />
                            <path d="M9.816,117.793c0.16,0.319,0.32,0.959,0.32,1.779c0,1.898-1.2,3.328-3.408,3.328c-2.109,0-3.538-1.43-3.538-3.519
                            c0-0.84,0.18-1.369,0.3-1.599l0.709,0.209c-0.16,0.33-0.28,0.8-0.28,1.359c0,1.579,1.009,2.629,2.778,2.629
                            c1.649,0,2.708-0.949,2.708-2.589c0-0.529-0.109-1.069-0.279-1.419L9.816,117.793z" />
                            <path d="M6.878,113.212v2.619h2.428v-2.919h0.729v3.788H3.3v-3.638h0.729v2.769h2.129v-2.619H6.878z" />
                            <path d="M10.036,111.78H3.3v-0.949l3.408-2.159c0.79-0.499,1.499-0.89,2.189-1.209l-0.011-0.021
                            c-0.899,0.08-1.719,0.101-2.768,0.101H3.3v-0.819h6.736v0.879l-3.417,2.139c-0.75,0.47-1.52,0.92-2.249,1.26l0.01,0.03
                            c0.85-0.051,1.659-0.07,2.778-0.07h2.878V111.78z" />
                            <path d="M6.878,101.712v2.619h2.428v-2.919h0.729v3.788H3.3v-3.638h0.729v2.769h2.129v-2.619H6.878z" />
                            <path d="M3.39,100.28c-0.09-0.439-0.14-1.069-0.14-1.669c0-0.93,0.17-1.529,0.549-1.949c0.3-0.34,0.76-0.529,1.279-0.529
                            c0.89,0,1.479,0.56,1.719,1.27h0.03c0.18-0.521,0.659-0.83,1.359-0.99c0.939-0.22,1.589-0.379,1.849-0.52v0.899
                            c-0.189,0.11-0.77,0.26-1.608,0.45c-0.93,0.2-1.279,0.56-1.31,1.35v0.819h2.918v0.869H3.39z M6.458,99.411v-0.89
                            c0-0.93-0.51-1.52-1.279-1.52c-0.87,0-1.249,0.63-1.259,1.55c0,0.419,0.04,0.72,0.08,0.859H6.458z" />
                            <path d="M10.036,93.512H7.178L3.3,95.641v-0.989l1.859-0.95c0.51-0.26,0.919-0.459,1.389-0.669v-0.021
                            c-0.439-0.189-0.879-0.42-1.389-0.68L3.3,91.363v-0.99l3.868,2.259h2.868V93.512z" />
                        </g>
                        <line stroke="#000000" stroke-miterlimit="10" x1="6.514" y1="81.5" x2="6.514" y2="11.5" />
                        <line stroke="#000000" stroke-miterlimit="10" x1="6.514" y1="11.5" x2="2.311" y2="15.703" />
                        <line stroke="#000000" stroke-miterlimit="10" x1="6.514" y1="11.5" x2="10.717" y2="15.703" />
                        <line stroke="#000000" stroke-miterlimit="10" x1="6.514" y1="218.125" x2="6.514" y2="288.125" />
                        <line stroke="#000000" stroke-miterlimit="10" x1="6.514" y1="288.125" x2="10.717" y2="283.922" />
                        <line stroke="#000000" stroke-miterlimit="10" x1="6.514" y1="288.125" x2="2.311" y2="283.922" />
                    </svg>
                </div>
                <div style="display: grid; grid-template-columns: repeat(5,4fr); gap:0.85rem">
                    <div style="grid-column-start: 1; grid-column-end:-1;">
                        {$this->upperPartGenerator()}
                    </div>
                    <div style="grid-column-start:1; grid-column-end: -1;display:grid; grid-template-columns: 1.2fr 1.5fr; flex:1;flex: grow 1;">
                        {$this->midPartGenerator()}
                    </div>
                    <div style="display:flex; margin-top:1.25rem; grid-column-start:1; grid-column-end: -1;">
                        <div style="width: 70%;">
                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 300 117.5" enable-background="new 0 0 300 117.5" xml:space="preserve">
                                <path fill="#FFFFFF" stroke="#000000" stroke-width="3" stroke-miterlimit="10" d="M244.939,104.25H53.771
                                    c-8.825,0-15.979-7.154-15.979-15.979V28.729c0-8.825,7.154-15.979,15.979-15.979h191.168c8.825,0,15.979,7.154,15.979,15.979
                                    v59.541C260.918,97.096,253.764,104.25,244.939,104.25z" />
                                <rect x="10.063" y="35.967" fill="#FFFFFF" stroke="#000000" stroke-width="3" stroke-miterlimit="10" width="13.687" height="45.066" />
                                <rect x="23.75" y="35.967" fill="#FFFFFF" stroke="#000000" stroke-width="3" stroke-miterlimit="10" width="13.687" height="45.066" />
                                <rect x="261.563" y="35.967" fill="#FFFFFF" stroke="#000000" stroke-width="3" stroke-miterlimit="10" width="13.687" height="45.066" />
                                <rect x="275.25" y="35.967" fill="#FFFFFF" stroke="#000000" stroke-width="3" stroke-miterlimit="10" width="13.687" height="45.066" />
                                <g>
                                    <path d="M131.668,59.688c0.533,0.273,1.352,0.546,2.197,0.546c0.91,0,1.391-0.377,1.391-0.949c0-0.546-0.416-0.857-1.469-1.235
                                        c-1.456-0.507-2.405-1.313-2.405-2.587c0-1.495,1.248-2.639,3.315-2.639c0.988,0,1.716,0.208,2.236,0.442l-0.442,1.599
                                        c-0.351-0.169-0.975-0.416-1.833-0.416s-1.274,0.39-1.274,0.845c0,0.559,0.494,0.806,1.625,1.235
                                        c1.547,0.572,2.275,1.378,2.275,2.613c0,1.469-1.131,2.717-3.536,2.717c-1.001,0-1.989-0.26-2.483-0.533L131.668,59.688z" />
                                    <path d="M140.313,54.63h-2.354v-1.664h6.734v1.664h-2.392v7.098h-1.989V54.63z" />
                                    <path d="M146.852,59.479l-0.624,2.249h-2.054l2.678-8.762h2.6l2.718,8.762h-2.133l-0.676-2.249H146.852z M149.075,57.998
                                        l-0.546-1.859c-0.156-0.52-0.312-1.17-0.442-1.69h-0.026c-0.13,0.52-0.26,1.183-0.403,1.69l-0.52,1.859H149.075z" />
                                    <path d="M160.334,61.325c-0.611,0.208-1.769,0.494-2.926,0.494c-1.599,0-2.756-0.403-3.562-1.183
                                        c-0.807-0.754-1.248-1.898-1.235-3.186c0.013-2.912,2.132-4.576,5.005-4.576c1.132,0,2.003,0.221,2.432,0.429l-0.416,1.586
                                        c-0.481-0.208-1.079-0.377-2.041-0.377c-1.651,0-2.899,0.936-2.899,2.834c0,1.807,1.131,2.874,2.756,2.874
                                        c0.455,0,0.819-0.053,0.976-0.13v-1.833h-1.353V56.71h3.264V61.325z" />
                                    <path d="M167.094,58.023h-3.225v2.08h3.602v1.625h-5.591v-8.762h5.408v1.625h-3.419v1.82h3.225V58.023z" />
                                </g>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
            <div style="display:flex;align-items:center; flex-direction:column">
                <div style="flex:1;flex-grow: 1; display:flex;align-items:center">
                    <svg version="1.1" id="bar-area" width="100%" height="25em" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 300 300" enable-background="new 0 0 300 300" xml:space="preserve">
                        <polygon points="75.176,237.093 75.176,47.986 183.275,47.986 183.275,42.704 75.176,42.704 69.894,42.704 69.894,47.986 
                            69.894,237.093 69.894,242.375 75.176,242.375 249.25,242.375 249.25,237.093 " />
                        <circle cx="53.478" cy="60.807" r="9.478" />
                        <circle fill="#27AAE1" cx="56.573" cy="63.088" r="4.095" />
                        <circle cx="53.478" cy="85.397" r="9.478" />
                        <circle cx="53.478" cy="113.061" r="9.478" />
                        <circle cx="53.478" cy="137.652" r="9.478" />
                        <circle cx="159.503" cy="31.036" r="9.478" />
                        <circle cx="134.912" cy="31.036" r="9.478" />
                        <circle cx="107.248" cy="31.036" r="9.478" />
                        <circle cx="82.658" cy="31.036" r="9.478" />
                        <circle cx="198.732" cy="254.043" r="9.478" />
                        <circle cx="159.572" cy="254.043" r="9.478" />
                        <circle cx="125.435" cy="254.043" r="9.478" />
                        <circle cx="87.012" cy="254.043" r="9.478" />
                        <circle cx="53.478" cy="163.842" r="9.478" />
                        <circle cx="53.478" cy="188.432" r="9.478" />
                        <circle cx="53.478" cy="213.022" r="9.478" />
                        <circle fill="#27AAE1" cx="55.573" cy="86.934" r="4.095" />
                        <circle fill="#27AAE1" cx="55.573" cy="114.5" r="4.095" />
                        <circle fill="#27AAE1" cx="55.573" cy="138.452" r="4.095" />
                        <circle fill="#27AAE1" cx="55.573" cy="165.842" r="4.095" />
                        <circle fill="#27AAE1" cx="55.573" cy="191.232" r="4.095" />
                        <circle fill="#27AAE1" cx="55.573" cy="215.022" r="4.095" />
                        <circle fill="#27AAE1" cx="88.75" cy="251.948" r="4.095" />
                        <circle fill="#27AAE1" cx="127.53" cy="251.948" r="4.095" />
                        <circle fill="#27AAE1" cx="162.083" cy="251.948" r="4.095" />
                        <circle fill="#27AAE1" cx="200.333" cy="250.948" r="4.095" />
                        <circle fill="#27AAE1" cx="84.655" cy="33.132" r="4.095" />
                        <circle fill="#27AAE1" cx="108.785" cy="33.132" r="4.095" />
                        <circle fill="#27AAE1" cx="137.941" cy="33.132" r="4.095" />
                        <circle fill="#27AAE1" cx="161.66" cy="33.132" r="4.095" />
                        <g>
                            <rect x="87.146" y="137.652" fill="none" width="136.854" height="30.223" />
                            <path d="M88.514,138.458c0.685-0.144,1.765-0.252,2.863-0.252c1.566,0,2.575,0.27,3.331,0.882c0.63,0.468,1.008,1.188,1.008,2.143
                                c0,1.17-0.774,2.197-2.052,2.665v0.036c1.152,0.288,2.502,1.243,2.502,3.043c0,1.044-0.414,1.836-1.026,2.431
                                c-0.846,0.774-2.214,1.134-4.195,1.134c-1.081,0-1.909-0.072-2.431-0.144V138.458z M90.081,143.428h1.422
                                c1.656,0,2.629-0.864,2.629-2.035c0-1.422-1.081-1.98-2.665-1.98c-0.72,0-1.134,0.054-1.386,0.108V143.428z M90.081,149.243
                                c0.306,0.054,0.756,0.072,1.314,0.072c1.621,0,3.115-0.594,3.115-2.359c0-1.656-1.422-2.341-3.133-2.341h-1.296V149.243z" />
                            <path d="M100.233,146.615l-1.26,3.817h-1.621l4.123-12.136h1.891l4.141,12.136h-1.674l-1.296-3.817H100.233z M104.212,145.39
                                l-1.188-3.493c-0.271-0.792-0.45-1.512-0.63-2.214h-0.036c-0.18,0.72-0.378,1.458-0.612,2.196l-1.188,3.511H104.212z" />
                            <path d="M109.287,138.458c0.792-0.162,1.926-0.252,3.007-0.252c1.674,0,2.755,0.306,3.511,0.99c0.612,0.54,0.955,1.369,0.955,2.305
                                c0,1.603-1.008,2.665-2.287,3.097v0.054c0.936,0.324,1.494,1.188,1.782,2.449c0.396,1.692,0.684,2.863,0.937,3.331h-1.621
                                c-0.198-0.342-0.468-1.386-0.81-2.899c-0.36-1.674-1.009-2.305-2.431-2.358h-1.476v5.257h-1.566V138.458z M110.853,143.986h1.603
                                c1.674,0,2.736-0.918,2.736-2.305c0-1.566-1.134-2.251-2.791-2.269c-0.756,0-1.296,0.072-1.548,0.144V143.986z" />
                            <path d="M124.749,146.615l-1.26,3.817h-1.621l4.123-12.136h1.891l4.141,12.136h-1.674l-1.296-3.817H124.749z M128.728,145.39
                                l-1.188-3.493c-0.27-0.792-0.45-1.512-0.63-2.214h-0.036c-0.18,0.72-0.378,1.458-0.612,2.196l-1.188,3.511H128.728z" />
                            <path d="M133.802,138.458c0.792-0.162,1.927-0.252,3.007-0.252c1.674,0,2.754,0.306,3.511,0.99c0.612,0.54,0.955,1.369,0.955,2.305
                                c0,1.603-1.008,2.665-2.287,3.097v0.054c0.937,0.324,1.495,1.188,1.783,2.449c0.396,1.692,0.684,2.863,0.937,3.331h-1.621
                                c-0.198-0.342-0.468-1.386-0.811-2.899c-0.36-1.674-1.008-2.305-2.431-2.358h-1.476v5.257h-1.567V138.458z M135.369,143.986h1.602
                                c1.675,0,2.737-0.918,2.737-2.305c0-1.566-1.135-2.251-2.791-2.269c-0.756,0-1.296,0.072-1.548,0.144V143.986z" />
                            <path d="M149.771,144.742h-4.717v4.375h5.257v1.314h-6.824v-12.136h6.554v1.314h-4.987v3.835h4.717V144.742z" />
                            <path d="M154.305,146.615l-1.26,3.817h-1.621l4.123-12.136h1.891l4.142,12.136h-1.675l-1.296-3.817H154.305z M158.284,145.39
                                l-1.188-3.493c-0.27-0.792-0.449-1.512-0.63-2.214h-0.036c-0.18,0.72-0.378,1.458-0.612,2.196l-1.188,3.511H158.284z" />
                        </g>
                    </svg>
                </div>
                <div>
                    <svg version="1.1" id="entrance" width="60%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 300 300" enable-background="new 0 0 300 300" xml:space="preserve">
                        <polygon stroke="#000000" stroke-width="3" stroke-miterlimit="10" points="111.351,110 111.351,204.25 89.601,204.25 
                                                        89.601,110 74.928,110 100.476,65.75 126.024,110 " />
                        <polygon stroke="#000000" stroke-width="3" stroke-miterlimit="10" points="211.399,110 211.399,204.25 189.649,204.25 
                                                        189.649,110 174.976,110 200.524,65.75 226.072,110 " />
                        <g>
                            <path d="M88.922,246.323c-0.066-1.782-0.132-3.938-0.132-6.095h-0.066c-0.462,1.892-1.078,4.004-1.65,5.742l-1.804,5.787h-2.618
                                l-1.584-5.742c-0.484-1.738-0.99-3.851-1.342-5.787h-0.044c-0.088,2.002-0.154,4.29-0.264,6.139L79.152,252H76.05l0.946-14.83
                                h4.467l1.452,4.95c0.462,1.717,0.924,3.565,1.254,5.304h0.066c0.418-1.717,0.924-3.675,1.408-5.325l1.584-4.929h4.378L92.42,252
                                h-3.279L88.922,246.323z" />
                            <path d="M98.38,248.193L97.324,252h-3.477l4.533-14.83h4.4L107.38,252h-3.609l-1.144-3.807H98.38z M102.143,245.686l-0.924-3.146
                                c-0.264-0.881-0.528-1.98-0.748-2.861h-0.044c-0.22,0.881-0.44,2.003-0.682,2.861l-0.88,3.146H102.143z" />
                            <path d="M112.725,237.17V252h-3.367v-14.83H112.725z" />
                            <path d="M115.627,252v-14.83h3.917l3.081,5.435c0.88,1.563,1.76,3.411,2.42,5.083h0.066c-0.221-1.958-0.287-3.961-0.287-6.183
                                v-4.335h3.081V252h-3.521l-3.168-5.721c-0.88-1.584-1.848-3.499-2.574-5.237l-0.066,0.022c0.088,1.958,0.132,4.049,0.132,6.469V252
                                H115.627z" />
                            <path d="M144.074,245.729h-5.457v3.521h6.096V252h-9.462v-14.83h9.153v2.75h-5.787v3.081h5.457V245.729z" />
                            <path d="M146.999,252v-14.83h3.917l3.08,5.435c0.88,1.563,1.76,3.411,2.42,5.083h0.066c-0.22-1.958-0.286-3.961-0.286-6.183v-4.335
                                h3.081V252h-3.521l-3.168-5.721c-0.88-1.584-1.849-3.499-2.574-5.237l-0.066,0.022c0.088,1.958,0.132,4.049,0.132,6.469V252
                                H146.999z" />
                            <path d="M165.039,239.986h-3.982v-2.816h11.397v2.816h-4.049V252h-3.366V239.986z" />
                            <path d="M174.234,237.368c1.078-0.177,2.685-0.309,4.467-0.309c2.2,0,3.74,0.33,4.797,1.166c0.88,0.704,1.364,1.738,1.364,3.103
                                c0,1.893-1.343,3.19-2.619,3.653v0.065c1.034,0.418,1.606,1.408,1.98,2.772c0.462,1.672,0.925,3.608,1.21,4.181h-3.432
                                c-0.242-0.418-0.595-1.628-1.034-3.454c-0.396-1.849-1.034-2.354-2.398-2.377h-1.013V252h-3.322V237.368z M177.557,243.749h1.32
                                c1.673,0,2.662-0.836,2.662-2.135c0-1.364-0.924-2.046-2.464-2.068c-0.814,0-1.276,0.066-1.519,0.11V243.749z" />
                            <path d="M190.932,248.193L189.876,252h-3.477l4.532-14.83h4.401l4.599,14.83h-3.608l-1.145-3.807H190.932z M194.694,245.686
                                l-0.924-3.146c-0.264-0.881-0.528-1.98-0.748-2.861h-0.044c-0.22,0.881-0.44,2.003-0.683,2.861l-0.88,3.146H194.694z" />
                            <path d="M201.91,252v-14.83h3.917l3.08,5.435c0.88,1.563,1.761,3.411,2.42,5.083h0.066c-0.22-1.958-0.286-3.961-0.286-6.183v-4.335
                                h3.08V252h-3.52l-3.169-5.721c-0.88-1.584-1.849-3.499-2.574-5.237l-0.066,0.022c0.088,1.958,0.132,4.049,0.132,6.469V252H201.91z" />
                            <path d="M227.981,251.582c-0.616,0.308-2.002,0.638-3.807,0.638c-5.127,0-7.767-3.19-7.767-7.415c0-5.061,3.608-7.877,8.097-7.877
                                c1.738,0,3.059,0.353,3.652,0.66l-0.682,2.662c-0.683-0.286-1.628-0.55-2.816-0.55c-2.662,0-4.73,1.606-4.73,4.907
                                c0,2.97,1.76,4.84,4.752,4.84c1.013,0,2.135-0.22,2.795-0.483L227.981,251.582z" />
                            <path d="M239.002,245.729h-5.457v3.521h6.096V252h-9.462v-14.83h9.153v2.75h-5.787v3.081h5.457V245.729z" />
                        </g>
                    </svg>
                </div>
            </div>
        CONTENT;
    }

    function upperPartGenerator()
    {
        $content = "";
        for ($x = 0; $x < 6; $x++) {
            $content .= ($x === 0) ? "<div style='display: flex; margin-top:1rem'>" : "";
            $id = $x + 1;
            $class = $this->availability($id, "sm");
            $newTbl = str_replace("id=\"\"", "id=\"tbl-for-4-{$id}\"", 
                $class[0] === "reserved" ? str_replace("4 Seater", 
                    "RESERVED UNTIL <br>{$class[1]}", 
                        $this->get_smTbl()) : $this->get_smTbl());
            $content .= "<div class='tbl-wrapper {$class[0]}' style='width: 30%;'>{$newTbl}</div>";
            $content .= ($x === 2) ? "</div>\n<div style='display: flex; margin-top:1rem'>" : "";
        }
        return $content;
    }

    function midPartGenerator()
    {
        $content = "";
        $content .= <<<TBL
            <div  class="tbl-wrapper {$this->availability(11, "lg")[0]}">
                {$this->get_lgTbl()}
            </div>
        TBL;
        $content .= "<div class='tbl-group-side' style='display:grid; grid-template-columns: repeat(2,2fr); grid-auto-rows: max-content; gap:0.25rem'>";
        for ($x = 0; $x < 4; $x++) {
            $id = $x + 7;
            $class = $this->availability($id, "sm");
            $newTbl = str_replace("id=\"\"", "id=\"tbl-for-4-{$id}\"", 
                $class[0] === "reserved" ? str_replace("4 Seater", 
                    "RESERVED UNTIL <br>{$class[1]}", 
                        $this->get_smTbl()) : $this->get_smTbl());
            $content .= "<div class='tbl-wrapper {$class[0]}'>{$newTbl}</div>";
        }
        $content .= "</div>";
        return $content;
    }

    function availability($id, $type)
    {
        $val = array();
        $data = json_decode($this->get_data(), true);
        $tbl = "";
        foreach ($data as $key => $row) {
            // echo $row["startTime"];
            if ($id == $row["tableId"]) {
                $tbl = $data[$key];
                break;
            }
        }

        if (!empty($tbl)) {
            // $timestamp = strtotime($tbl["endTime"]) + 60 * 60;
            // $endTime = strtotime($tbl["endTime"]) + 60 * 60;
            $endTime = strtotime($tbl["endTime"]);
            $timeSelected = strtotime("09:00");
            // $time = date('H:i', $timestamp);
            $val[0] = $timeSelected <= $endTime ? "reserved" : "";
            $val[1] = date('h:i a', $endTime);
            return $val;
        } else {
            $val[0] = "available";
            return $val;
        }
    }

    // GETTERS AND SETTERS
    function set_header($header)
    {
        $this->header = $header;
    }

    function get_header()
    {
        return $this->header;
    }

    function set_smTbl($smTbl)
    {
        $this->smTbl = $smTbl;
    }

    function get_smTbl()
    {
        return $this->smTbl;
    }

    function set_lgTbl($lgTbl)
    {
        $this->lgTbl = $lgTbl;
    }

    function get_lgTbl()
    {
        return $this->lgTbl;
    }

    function set_data($data)
    {
        $this->data = $data;
    }

    function get_data()
    {
        return $this->data;
    }

    private $header;
    private $smTbl;
    private $lgTbl;
    private $data;
}
